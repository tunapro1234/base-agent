_meta:
  version: "0.1.0"
  updated: 2026-01-18
  status: draft

language: go

intent: |
  Base Agent icin debug CLI (Go).
  HTTP API uzerinden baglanir, Codex-benzeri chat arayuzu sunar.

overview: |
  Hedefler:
    - Base agent calisiyor mu hizli test
    - System prompt ve model/provider ayarlariyla davranis testi
    - Tool calling ve agentic akislarin gozlemlenmesi

  Not: CLI tamamen HTTP API consumeridir; server tarafinda state tutmaz.

cli:
  binary: bin/debug-cli
  entrypoint: cmd/debug-cli/main.go
  usage: |
    debug-cli health
    debug-cli run --instruction "Merhaba"
    debug-cli repl --provider gemini
  build:
    command: "cd src/debug_cli && go build -o ../../bin/debug-cli ./cmd/debug-cli"
    output: "bin/debug-cli"

api:
  types:
    DebugConfig:
      fields:
        - name: base_url
          type: string
          default: "http://localhost:8080"
        - name: token
          type: string
          nullable: true
        - name: provider
          type: string
          nullable: true
        - name: model
          type: string
          nullable: true
        - name: temperature
          type: float
          nullable: true
        - name: system_prompt
          type: string
          nullable: true
        - name: debug
          type: boolean
          default: false

    ToolCall:
      fields:
        - name: name
          type: string
        - name: args
          type: map<string, any>

    ToolResult:
      fields:
        - name: name
          type: string
        - name: output
          type: any
          nullable: true
        - name: error
          type: string
          nullable: true

    Trace:
      fields:
        - name: provider
          type: string
          nullable: true
        - name: model
          type: string
          nullable: true
        - name: tool_calls
          type: list<ToolCall>
          nullable: true
        - name: tool_results
          type: list<ToolResult>
          nullable: true
        - name: raw
          type: any
          nullable: true

    ExecuteRequest:
      fields:
        - name: instruction
          type: string
        - name: system_prompt
          type: string
          nullable: true
        - name: provider
          type: string
          nullable: true
        - name: model
          type: string
          nullable: true
        - name: temperature
          type: float
          nullable: true
        - name: debug
          type: boolean
          nullable: true

    ExecuteResponse:
      fields:
        - name: success
          type: boolean
        - name: output
          type: string
        - name: task_id
          type: string
          nullable: true
        - name: trace
          type: Trace
          nullable: true

  exports:
    DebugClient:
      type: class
      methods:
        - name: health
          returns: map<string, any>
        - name: execute
          parameters:
            - name: request
              type: ExecuteRequest
          returns: ExecuteResponse
        - name: tasks
          parameters:
            - name: limit
              type: integer
              default: 10
          returns: map<string, any>

    DebugCLI:
      type: class
      methods:
        - name: run
          description: CLI entrypoint
        - name: repl
          description: Chat arayuzu

implementation: "./BLUEPRINT.spec.yaml"

tests: "./BLUEPRINT.spec.yaml"

dependencies:
  external:
    - Go 1.22+
